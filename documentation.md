# دليل استخدام المعجم الموسوعي للمعاني

## نظرة عامة
المعجم الموسوعي للمعاني هو تطبيق ويب يتيح للمستخدمين استعراض وإدارة المعاني والشواهد في اللغة العربية. يتكون التطبيق من واجهة أمامية (Frontend) مبنية باستخدام Next.js وواجهة خلفية (Backend) مبنية باستخدام Express.js مع قاعدة بيانات MongoDB.

## المميزات الرئيسية
- تصفح المعاني حسب الحروف الأبجدية العربية
- عرض المعاني الرئيسية والفرعية
- عرض الشواهد المختلفة (شعر، قرآن، حديث) مع تفاصيلها
- إضافة معاني جديدة وشواهد جديدة
- نظام تعليقات وردود
- نظام تقييم (إعجاب وعدم إعجاب)
- البحث في المعاني والشواهد

## متطلبات النظام
- Node.js (الإصدار 14 أو أحدث)
- MongoDB (قاعدة بيانات محلية أو MongoDB Atlas)
- حساب على Vercel للنشر (اختياري)

## تثبيت وتشغيل التطبيق محلياً

### الواجهة الخلفية (Backend)
1. انتقل إلى مجلد الواجهة الخلفية:
   ```
   cd dictionary-project/backend
   ```

2. قم بتثبيت الاعتماديات:
   ```
   npm install
   ```

3. قم بإنشاء ملف `.env` وإضافة المتغيرات البيئية:
   ```
   PORT=5000
   MONGODB_URI=mongodb://localhost:27017/dictionary
   NODE_ENV=development
   ```

4. قم بتشغيل الخادم:
   ```
   npm run dev
   ```

### الواجهة الأمامية (Frontend)
1. انتقل إلى مجلد الواجهة الأمامية:
   ```
   cd dictionary-project/frontend
   ```

2. قم بتثبيت الاعتماديات:
   ```
   npm install
   ```

3. قم بإنشاء ملف `.env.local` وإضافة المتغيرات البيئية:
   ```
   NEXT_PUBLIC_API_URL=http://localhost:5000/api
   ```

4. قم بتشغيل خادم التطوير:
   ```
   npm run dev
   ```

5. افتح المتصفح على العنوان: `http://localhost:3000`

## نشر التطبيق على Vercel

### نشر الواجهة الخلفية (Backend)
1. قم بإنشاء حساب على [MongoDB Atlas](https://www.mongodb.com/cloud/atlas) وإنشاء قاعدة بيانات جديدة.

2. احصل على رابط الاتصال بقاعدة البيانات من MongoDB Atlas.

3. قم بإنشاء حساب على [Vercel](https://vercel.com) إذا لم يكن لديك حساب.

4. قم بتثبيت Vercel CLI:
   ```
   npm install -g vercel
   ```

5. انتقل إلى مجلد الواجهة الخلفية وقم بتسجيل الدخول إلى Vercel:
   ```
   cd dictionary-project/backend
   vercel login
   ```

6. قم بنشر الواجهة الخلفية:
   ```
   vercel
   ```

7. أثناء عملية النشر، قم بإضافة المتغيرات البيئية التالية:
   - `MONGODB_URI`: رابط الاتصال بقاعدة بيانات MongoDB Atlas
   - `NODE_ENV`: production

8. احتفظ برابط النشر الذي ستحصل عليه من Vercel.

### نشر الواجهة الأمامية (Frontend)
1. قم بتعديل ملف `.env.local` في مجلد الواجهة الأمامية لاستخدام رابط الواجهة الخلفية المنشورة:
   ```
   NEXT_PUBLIC_API_URL=https://your-backend-url.vercel.app/api
   ```

2. انتقل إلى مجلد الواجهة الأمامية وقم بنشرها:
   ```
   cd dictionary-project/frontend
   vercel
   ```

3. بعد اكتمال النشر، ستحصل على رابط للواجهة الأمامية المنشورة.

## استخدام التطبيق

### تصفح المعاني
1. اختر الحرف من شريط الحروف الأبجدية في أعلى الصفحة.
2. ستظهر قائمة بالمعاني الرئيسية المرتبطة بهذا الحرف في الشريط الجانبي.
3. اختر معنى رئيسي لعرض الشواهد المرتبطة به.

### إضافة معنى جديد
1. انقر على زر "إضافة معنى جديد" في الشريط الجانبي.
2. أدخل عنوان المعنى الجديد.
3. انقر على "حفظ".

### إضافة شاهد جديد
1. اختر معنى رئيسي من القائمة.
2. انقر على زر "إضافة شاهد جديد".
3. اختر نوع الشاهد (شعر، قرآن، حديث).
4. أدخل المعلومات المطلوبة حسب نوع الشاهد.
5. أضف الوسوم المناسبة.
6. انقر على "حفظ الشاهد".

### التفاعل مع الشواهد
- يمكنك الإعجاب أو عدم الإعجاب بالشواهد.
- يمكنك إضافة تعليقات على الشواهد.
- يمكنك الرد على تعليقات الآخرين.

### البحث
استخدم حقل البحث في أعلى الصفحة للبحث عن معاني أو شواهد محددة.

## هيكل المشروع

### الواجهة الخلفية (Backend)
- `config/`: ملفات الإعداد (اتصال قاعدة البيانات)
- `controllers/`: وحدات التحكم بالطلبات
- `models/`: نماذج البيانات
- `routes/`: مسارات API
- `index.js`: نقطة الدخول الرئيسية

### الواجهة الأمامية (Frontend)
- `src/app/`: صفحات التطبيق
- `src/utils/`: أدوات مساعدة (مثل وظائف API)
- `public/`: الملفات العامة

## واجهات API

### المعاني الرئيسية
- `GET /api/meanings`: الحصول على جميع المعاني الرئيسية
- `GET /api/meanings/:id`: الحصول على معنى رئيسي محدد
- `POST /api/meanings`: إنشاء معنى رئيسي جديد
- `PUT /api/meanings/:id`: تحديث معنى رئيسي
- `DELETE /api/meanings/:id`: حذف معنى رئيسي

### المعاني الفرعية
- `GET /api/submeanings`: الحصول على جميع المعاني الفرعية
- `GET /api/submeanings/:id`: الحصول على معنى فرعي محدد
- `POST /api/submeanings`: إنشاء معنى فرعي جديد
- `PUT /api/submeanings/:id`: تحديث معنى فرعي
- `DELETE /api/submeanings/:id`: حذف معنى فرعي

### الشواهد
- `GET /api/references`: الحصول على جميع الشواهد
- `GET /api/references/:id`: الحصول على شاهد محدد
- `POST /api/references`: إنشاء شاهد جديد
- `PUT /api/references/:id`: تحديث شاهد
- `DELETE /api/references/:id`: حذف شاهد
- `PUT /api/references/:id/like`: الإعجاب أو عدم الإعجاب بشاهد
- `POST /api/references/:id/comments`: إضافة تعليق على شاهد
- `POST /api/references/:id/comments/:commentId/replies`: إضافة رد على تعليق
- `GET /api/references/search`: البحث في الشواهد

## استكشاف الأخطاء وإصلاحها

### مشاكل الاتصال بقاعدة البيانات
- تأكد من تشغيل خدمة MongoDB.
- تحقق من صحة رابط الاتصال في ملف `.env`.
- تأكد من أن المستخدم لديه صلاحيات القراءة والكتابة.

### مشاكل الواجهة الأمامية
- تأكد من صحة عنوان API في ملف `.env.local`.
- تحقق من تشغيل الواجهة الخلفية.
- افحص وحدة تحكم المتصفح للأخطاء.

### مشاكل النشر
- تأكد من إعداد المتغيرات البيئية بشكل صحيح في Vercel.
- تحقق من أن قاعدة بيانات MongoDB Atlas مفتوحة للاتصالات الخارجية.
- تأكد من تكوين CORS بشكل صحيح في الواجهة الخلفية.
